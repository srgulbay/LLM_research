{% extends "admin/admin_layout.html" %}

{% block title %}üî¨ Ara≈ütƒ±rma Vaka Olu≈üturucu{% endblock %}

{% block admin_content %}
<div class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 py-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <!-- Hero Header -->
        <div class="mb-8">
            <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden">
                <div class="bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 p-8">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <div class="bg-white/20 backdrop-blur-lg rounded-2xl p-4">
                                <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path>
                                </svg>
                            </div>
                            <div>
                                <h1 class="text-3xl font-bold text-white mb-2">Ara≈ütƒ±rma Vaka Olu≈üturucu</h1>
                                <p class="text-blue-100 text-lg flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                    </svg>
                                    Yapay zeka destekli akademik vaka setleri - Altƒ±n standart yanƒ±tlarla
                                </p>
                            </div>
                        </div>
                        <a href="{{ url_for('admin_dashboard') }}" class="group bg-white/20 backdrop-blur-lg hover:bg-white/30 transition-all duration-300 text-white px-6 py-3 rounded-xl flex items-center space-x-2 font-medium">
                            <svg class="w-5 h-5 group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                            </svg>
                            <span>Dashboard</span>
                        </a>
                    </div>
                </div>
                
                <!-- Quick Stats -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 p-6 bg-slate-50 dark:bg-slate-900/50">
                    <div class="flex items-center space-x-3">
                        <div class="bg-blue-100 dark:bg-blue-900/30 rounded-lg p-3">
                            <svg class="w-6 h-6 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                        </div>
                        <div>
                            <p class="text-sm text-slate-600 dark:text-slate-400">Hazƒ±r ≈ûablon</p>
                            <p class="text-xl font-bold text-slate-900 dark:text-white">3</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-3">
                        <div class="bg-green-100 dark:bg-green-900/30 rounded-lg p-3">
                            <svg class="w-6 h-6 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <div>
                            <p class="text-sm text-slate-600 dark:text-slate-400">Max Vaka</p>
                            <p class="text-xl font-bold text-slate-900 dark:text-white">20</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-3">
                        <div class="bg-purple-100 dark:bg-purple-900/30 rounded-lg p-3">
                            <svg class="w-6 h-6 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
                            </svg>
                        </div>
                        <div>
                            <p class="text-sm text-slate-600 dark:text-slate-400">Kanƒ±t D√ºzeyi</p>
                            <p class="text-xl font-bold text-slate-900 dark:text-white">1A-5</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-3">
                        <div class="bg-amber-100 dark:bg-amber-900/30 rounded-lg p-3">
                            <svg class="w-6 h-6 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <div>
                            <p class="text-sm text-slate-600 dark:text-slate-400">AI Engine</p>
                            <p class="text-xl font-bold text-slate-900 dark:text-white">Gemini</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ana Form -->
        <form method="POST" action="{{ url_for('admin_case_generator') }}" id="caseGeneratorForm">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                
                <!-- Sol Panel - ≈ûablon Se√ßimi -->
                <div class="space-y-6">
                    <!-- ≈ûablon Kartƒ± -->
                    <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden transform transition-all duration-300 hover:shadow-2xl hover:-translate-y-1">
                        <div class="bg-gradient-to-r from-blue-500 to-blue-600 px-6 py-4">
                            <div class="flex items-center space-x-3">
                                <div class="bg-white/20 backdrop-blur-lg rounded-lg p-2">
                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                                    </svg>
                                </div>
                                <h3 class="text-lg font-bold text-white">1. ≈ûablon Se√ßimi</h3>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2">
                                        Ara≈ütƒ±rma ≈ûablonu
                                    </label>
                                    <select class="w-full px-4 py-3 rounded-xl border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:focus:ring-blue-900/30 transition-all duration-200" 
                                            name="template_type" id="templateType" required>
                                        <option value="">≈ûablon Se√ßin...</option>
                                        <optgroup label="üî¨ Hazƒ±r ≈ûablonlar" class="font-semibold">
                                            <option value="antibiotic_stewardship">üíä Akƒ±lcƒ± Antibiyotik Kullanƒ±mƒ±</option>
                                            <option value="emergency_triage">üö® Acil Servis Triyajƒ±</option>
                                            <option value="pediatric_diagnosis">üë∂ Pediatrik Tanƒ±sal Akƒ±l Y√ºr√ºtme</option>
                                        </optgroup>
                                        <optgroup label="‚ú® √ñzel" class="font-semibold">
                                            <option value="custom">‚úèÔ∏è √ñzel Direktifler</option>
                                        </optgroup>
                                    </select>
                                    <p class="mt-2 text-xs text-slate-500 dark:text-slate-400 flex items-center">
                                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"></path>
                                        </svg>
                                        Hazƒ±r ≈üablonlar √∂nceden tanƒ±mlanmƒ±≈ü direktiflerle gelir
                                    </p>
                                </div>

                                <!-- ≈ûablon A√ßƒ±klamalarƒ± -->
                                <div id="templateDescription" class="hidden">
                                    <div class="bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4">
                                        <div class="flex items-start space-x-3">
                                            <svg class="w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                            </svg>
                                            <div class="flex-1">
                                                <p class="text-sm text-slate-700 dark:text-slate-300" id="templateDescriptionText"></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Parametreler Kartƒ± -->
                    <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden transform transition-all duration-300 hover:shadow-2xl hover:-translate-y-1">
                        <div class="bg-gradient-to-r from-green-500 to-emerald-600 px-6 py-4">
                            <div class="flex items-center space-x-3">
                                <div class="bg-white/20 backdrop-blur-lg rounded-lg p-2">
                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path>
                                    </svg>
                                </div>
                                <h3 class="text-lg font-bold text-white">3. Parametreler</h3>
                            </div>
                        </div>
                        <div class="p-6 space-y-4">
                            <div>
                                <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2">
                                    Vaka Sayƒ±sƒ±
                                </label>
                                <input type="number" 
                                       class="w-full px-4 py-3 rounded-xl border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:border-green-500 focus:ring-4 focus:ring-green-100 dark:focus:ring-green-900/30 transition-all duration-200" 
                                       name="num_cases" 
                                       min="1" max="20" value="5" required
                                       id="numCases">
                                <div class="mt-2 flex items-center justify-between">
                                    <span class="text-xs text-slate-500 dark:text-slate-400">Min: 1</span>
                                    <span class="text-xs font-semibold text-green-600 dark:text-green-400" id="caseCountDisplay">5 vaka</span>
                                    <span class="text-xs text-slate-500 dark:text-slate-400">Max: 20</span>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2">
                                    Soru/Vaka
                                </label>
                                <input type="number" 
                                       class="w-full px-4 py-3 rounded-xl border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:border-green-500 focus:ring-4 focus:ring-green-100 dark:focus:ring-green-900/30 transition-all duration-200" 
                                       name="questions_per_case" 
                                       min="3" max="10" value="5" required
                                       id="questionsPerCase">
                                <div class="mt-2 flex items-center justify-between">
                                    <span class="text-xs text-slate-500 dark:text-slate-400">Min: 3</span>
                                    <span class="text-xs font-semibold text-green-600 dark:text-green-400" id="questionCountDisplay">5 soru/vaka</span>
                                    <span class="text-xs text-slate-500 dark:text-slate-400">Max: 10</span>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2">
                                    Zorluk Seviyesi
                                </label>
                                <select class="w-full px-4 py-3 rounded-xl border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:border-green-500 focus:ring-4 focus:ring-green-100 dark:focus:ring-green-900/30 transition-all duration-200" 
                                        name="difficulty" required>
                                    <option value="easy">üü¢ Kolay - Temel bilgi</option>
                                    <option value="medium">üü° Orta - Klinik muhakeme</option>
                                    <option value="hard">üî¥ Zor - Karma≈üƒ±k vakalar</option>
                                    <option value="mixed" selected>üé® Karƒ±≈üƒ±k - T√ºm seviyeler</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2">
                                    <span class="flex items-center">
                                        <svg class="w-4 h-4 mr-2 text-purple-500" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M13 7H7v6h6V7z"/>
                                            <path fill-rule="evenodd" d="M7 2a1 1 0 012 0v1h2V2a1 1 0 112 0v1h2a2 2 0 012 2v2h1a1 1 0 110 2h-1v2h1a1 1 0 110 2h-1v2a2 2 0 01-2 2h-2v1a1 1 0 11-2 0v-1H9v1a1 1 0 11-2 0v-1H5a2 2 0 01-2-2v-2H2a1 1 0 110-2h1V9H2a1 1 0 010-2h1V5a2 2 0 012-2h2V2zM5 5h10v10H5V5z" clip-rule="evenodd"/>
                                        </svg>
                                        Gemini Model
                                    </span>
                                </label>
                                <select class="w-full px-4 py-3 rounded-xl border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:border-green-500 focus:ring-4 focus:ring-green-100 dark:focus:ring-green-900/30 transition-all duration-200" 
                                        name="gemini_model" required>
                                    <option value="gemini-2.0-flash-exp">‚ö° Gemini 2.0 Flash (Experimental) - Hƒ±zlƒ±</option>
                                    <option value="gemini-pro-latest" selected>üéØ Gemini Pro Latest - Dengeli</option>
                                    <option value="gemini-2.5-pro">üöÄ Gemini 2.5 Pro - Geli≈ümi≈ü</option>
                                    <option value="gemini-2.5-flash">üí´ Gemini 2.5 Flash - Hƒ±zlƒ± & G√º√ßl√º</option>
                                </select>
                                <p class="mt-2 text-xs text-slate-500 dark:text-slate-400">
                                    Daha g√º√ßl√º modeller daha kaliteli vakalar √ºretir ancak daha yava≈ütƒ±r.
                                </p>
                            </div>

                            <!-- Total Questions Display -->
                            <div class="bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border border-green-200 dark:border-green-800 rounded-xl p-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm font-medium text-slate-700 dark:text-slate-300">Toplam Soru:</span>
                                    <span class="text-2xl font-bold text-green-600 dark:text-green-400" id="totalQuestions">25</span>
                                </div>
                                <div class="mt-2 h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden">
                                    <div class="h-full bg-gradient-to-r from-green-500 to-emerald-500 rounded-full transition-all duration-500" id="progressBar" style="width: 25%"></div>
                                </div>
                                <p class="mt-2 text-xs text-slate-500 dark:text-slate-400 flex items-center">
                                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                                    </svg>
                                    Tahmini s√ºre: <span id="estimatedTime" class="font-semibold ml-1">5-10 dakika</span>
                                </p>
                            </div>

                            <div class="bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4">
                                <div class="flex items-start space-x-3">
                                    <svg class="w-5 h-5 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                    </svg>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-amber-900 dark:text-amber-200">Dikkat</p>
                                        <p class="text-xs text-amber-700 dark:text-amber-300 mt-1">
                                            Vaka olu≈üturma i≈ülemi internet baƒülantƒ±sƒ± gerektirir ve birka√ß dakika s√ºrebilir.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Orta Panel - Direktifler -->
                <div class="space-y-6">
                    <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden transform transition-all duration-300 hover:shadow-2xl hover:-translate-y-1">
                        <div class="bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4">
                            <div class="flex items-center space-x-3">
                                <div class="bg-white/20 backdrop-blur-lg rounded-lg p-2">
                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                                    </svg>
                                </div>
                                <h3 class="text-lg font-bold text-white">2. Ara≈ütƒ±rma Direktifleri</h3>
                            </div>
                        </div>
                        <div class="p-6">
                            <!-- √ñzel direktif alanlarƒ± (sadece custom se√ßildiƒüinde g√∂r√ºn√ºr) -->
                            <div id="customDirectives" class="hidden space-y-4">
                                <div>
                                    <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2">
                                        Ara≈ütƒ±rma Ba≈ülƒ±ƒüƒ±
                                    </label>
                                    <input type="text" 
                                           class="w-full px-4 py-3 rounded-xl border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:border-purple-500 focus:ring-4 focus:ring-purple-100 dark:focus:ring-purple-900/30 transition-all duration-200" 
                                           name="research_title" 
                                           placeholder="√ñrn: Akƒ±lcƒ± Antibiyotik Kullanƒ±mƒ± Ara≈ütƒ±rmasƒ±">
                                </div>

                                <div>
                                    <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2">
                                        Hedef Grup
                                    </label>
                                    <input type="text" 
                                           class="w-full px-4 py-3 rounded-xl border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:border-purple-500 focus:ring-4 focus:ring-purple-100 dark:focus:ring-purple-900/30 transition-all duration-200" 
                                           name="target_group" 
                                           placeholder="√ñrn: Aile Hekimleri">
                                </div>

                                <div>
                                    <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2">
                                        Bran≈ü
                                    </label>
                                    <select class="w-full px-4 py-3 rounded-xl border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:border-purple-500 focus:ring-4 focus:ring-purple-100 dark:focus:ring-purple-900/30 transition-all duration-200" 
                                            name="specialty">
                                        <option value="">Bran≈ü Se√ßin...</option>
                                        <option value="Aile Hekimliƒüi">üè• Aile Hekimliƒüi</option>
                                        <option value="Acil Tƒ±p">üöë Acil Tƒ±p</option>
                                        <option value="Pediatri">üë∂ Pediatri</option>
                                        <option value="ƒ∞√ß Hastalƒ±klarƒ±">ü©∫ ƒ∞√ß Hastalƒ±klarƒ±</option>
                                        <option value="Kardiyoloji">‚ù§Ô∏è Kardiyoloji</option>
                                        <option value="N√∂roloji">üß† N√∂roloji</option>
                                        <option value="Genel Cerrahi">üî™ Genel Cerrahi</option>
                                        <option value="Kadƒ±n Hastalƒ±klarƒ±">üë© Kadƒ±n Hastalƒ±klarƒ±</option>
                                    </select>
                                </div>

                                <div>
                                    <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2">
                                        Odak Alanlarƒ±
                                    </label>
                                    <textarea class="w-full px-4 py-3 rounded-xl border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:border-purple-500 focus:ring-4 focus:ring-purple-100 dark:focus:ring-purple-900/30 transition-all duration-200 resize-none" 
                                              name="focus_areas" 
                                              rows="5" 
                                              placeholder="Her satƒ±ra bir odak alanƒ± yazƒ±n&#10;√ñrn:&#10;‚Ä¢ Gereksiz antibiyotik kullanƒ±mƒ±&#10;‚Ä¢ Doƒüru antibiyotik se√ßimi&#10;‚Ä¢ Antibiyotik direnci"></textarea>
                                    <p class="mt-2 text-xs text-slate-500 dark:text-slate-400">
                                        Her satƒ±ra bir alan yazƒ±n (‚Ä¢ veya - ile ba≈ülatabilirsiniz)
                                    </p>
                                </div>
                            </div>

                            <!-- Hazƒ±r ≈üablon i√ßin bilgilendirme -->
                            <div id="templateInfo" class="hidden">
                                <div class="bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 border border-emerald-200 dark:border-emerald-800 rounded-xl p-4">
                                    <div class="flex items-start space-x-3">
                                        <svg class="w-6 h-6 text-emerald-600 dark:text-emerald-400 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                        </svg>
                                        <div class="flex-1">
                                            <p class="text-sm font-medium text-emerald-900 dark:text-emerald-200">Hazƒ±r ≈ûablon Se√ßildi</p>
                                            <p class="text-xs text-emerald-700 dark:text-emerald-300 mt-1">
                                                Bu ≈üablon √∂nceden tanƒ±mlanmƒ±≈ü direktiflerle gelir. A≈üaƒüƒ±dan ek direktifler ekleyebilirsiniz.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Ek Direktifler (her zaman g√∂r√ºn√ºr) -->
                            <div class="mt-4">
                                <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 flex items-center">
                                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                    </svg>
                                    Ek Direktifler / Notlar <span class="text-slate-400 font-normal ml-1">(ƒ∞steƒüe baƒülƒ±)</span>
                                </label>
                                <textarea class="w-full px-4 py-3 rounded-xl border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:border-purple-500 focus:ring-4 focus:ring-purple-100 dark:focus:ring-purple-900/30 transition-all duration-200 resize-none" 
                                          name="additional_directives" 
                                          rows="4" 
                                          placeholder="ƒ∞steƒüe baƒülƒ± ek y√∂nergeler veya √∂zel talepler...&#10;&#10;√ñrn: √úst solunum yolu enfeksiyonlarƒ±na odaklan, g√ºncel kƒ±lavuzlarƒ± kullan"></textarea>
                                <p class="mt-2 text-xs text-slate-500 dark:text-slate-400">
                                    √ñzel talepler, ek a√ßƒ±klamalar veya kƒ±sƒ±tlamalar buraya yazƒ±labilir
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Saƒü Panel - √ñnizleme ve √ñzellikler -->
                <div class="space-y-6">
                    <!-- Altƒ±n Standart √ñzellikleri -->
                    <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden transform transition-all duration-300 hover:shadow-2xl hover:-translate-y-1">
                        <div class="bg-gradient-to-r from-amber-500 to-orange-600 px-6 py-4">
                            <div class="flex items-center space-x-3">
                                <div class="bg-white/20 backdrop-blur-lg rounded-lg p-2">
                                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                                    </svg>
                                </div>
                                <h3 class="text-lg font-bold text-white">Altƒ±n Standart √ñzellikleri</h3>
                            </div>
                        </div>
                        <div class="p-6">
                            <p class="text-sm text-slate-600 dark:text-slate-400 mb-4">
                                Her soru i√ßin otomatik olu≈üturulacak akademik kalite √∂zellikleri:
                            </p>
                            
                            <div class="space-y-3">
                                <div class="flex items-start space-x-3 group">
                                    <div class="flex-shrink-0 mt-0.5">
                                        <div class="w-8 h-8 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center group-hover:scale-110 transition-transform">
                                            <svg class="w-4 h-4 text-green-600 dark:text-green-400" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm font-semibold text-slate-900 dark:text-white">Doƒüru Cevap</p>
                                        <p class="text-xs text-slate-500 dark:text-slate-400">A-D arasƒ± se√ßenek belirleme</p>
                                    </div>
                                </div>

                                <div class="flex items-start space-x-3 group">
                                    <div class="flex-shrink-0 mt-0.5">
                                        <div class="w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center group-hover:scale-110 transition-transform">
                                            <svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm font-semibold text-slate-900 dark:text-white">Altƒ±n Standart Gerek√ße</p>
                                        <p class="text-xs text-slate-500 dark:text-slate-400">Detaylƒ± bilimsel a√ßƒ±klama</p>
                                    </div>
                                </div>

                                <div class="flex items-start space-x-3 group">
                                    <div class="flex-shrink-0 mt-0.5">
                                        <div class="w-8 h-8 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center group-hover:scale-110 transition-transform">
                                            <svg class="w-4 h-4 text-purple-600 dark:text-purple-400" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm font-semibold text-slate-900 dark:text-white">Kanƒ±t D√ºzeyi</p>
                                        <p class="text-xs text-slate-500 dark:text-slate-400">1A (g√º√ßl√º) - 5 (zayƒ±f) skalasƒ±</p>
                                    </div>
                                </div>

                                <div class="flex items-start space-x-3 group">
                                    <div class="flex-shrink-0 mt-0.5">
                                        <div class="w-8 h-8 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center group-hover:scale-110 transition-transform">
                                            <svg class="w-4 h-4 text-red-600 dark:text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm font-semibold text-slate-900 dark:text-white">Yanlƒ±≈ü Se√ßenekler</p>
                                        <p class="text-xs text-slate-500 dark:text-slate-400">Neden yanlƒ±≈ü olduƒüu a√ßƒ±klamasƒ±</p>
                                    </div>
                                </div>

                                <div class="flex items-start space-x-3 group">
                                    <div class="flex-shrink-0 mt-0.5">
                                        <div class="w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center group-hover:scale-110 transition-transform">
                                            <svg class="w-4 h-4 text-indigo-600 dark:text-indigo-400" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"></path>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm font-semibold text-slate-900 dark:text-white">Referanslar</p>
                                        <p class="text-xs text-slate-500 dark:text-slate-400">Kƒ±lavuzlar ve kaynaklar</p>
                                    </div>
                                </div>

                                <div class="flex items-start space-x-3 group">
                                    <div class="flex-shrink-0 mt-0.5">
                                        <div class="w-8 h-8 rounded-lg bg-teal-100 dark:bg-teal-900/30 flex items-center justify-center group-hover:scale-110 transition-transform">
                                            <svg class="w-4 h-4 text-teal-600 dark:text-teal-400" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm font-semibold text-slate-900 dark:text-white">Scoring Criteria</p>
                                        <p class="text-xs text-slate-500 dark:text-slate-400">Puanlama kriterleri</p>
                                    </div>
                                </div>

                                <div class="flex items-start space-x-3 group">
                                    <div class="flex-shrink-0 mt-0.5">
                                        <div class="w-8 h-8 rounded-lg bg-pink-100 dark:bg-pink-900/30 flex items-center justify-center group-hover:scale-110 transition-transform">
                                            <svg class="w-4 h-4 text-pink-600 dark:text-pink-400" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm font-semibold text-slate-900 dark:text-white">Yetkinlik</p>
                                        <p class="text-xs text-slate-500 dark:text-slate-400">Deƒüerlendirilen beceri</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Kanƒ±t D√ºzeyi Skalasƒ± -->
                            <div class="mt-6 pt-6 border-t border-slate-200 dark:border-slate-700">
                                <h4 class="text-sm font-bold text-slate-900 dark:text-white mb-3 flex items-center">
                                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 0l-2 2a1 1 0 101.414 1.414L8 10.414l1.293 1.293a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                    </svg>
                                    Kanƒ±t D√ºzeyi Skalasƒ±
                                </h4>
                                <div class="space-y-2 text-xs">
                                    <div class="flex items-center justify-between p-2 rounded-lg bg-green-50 dark:bg-green-900/20">
                                        <span class="font-bold text-green-700 dark:text-green-400">1A</span>
                                        <span class="text-green-600 dark:text-green-300">Sistemik derleme/meta-analiz</span>
                                    </div>
                                    <div class="flex items-center justify-between p-2 rounded-lg bg-emerald-50 dark:bg-emerald-900/20">
                                        <span class="font-bold text-emerald-700 dark:text-emerald-400">1B</span>
                                        <span class="text-emerald-600 dark:text-emerald-300">RCT √ßalƒ±≈üma</span>
                                    </div>
                                    <div class="flex items-center justify-between p-2 rounded-lg bg-blue-50 dark:bg-blue-900/20">
                                        <span class="font-bold text-blue-700 dark:text-blue-400">2A</span>
                                        <span class="text-blue-600 dark:text-blue-300">Kontroll√º √ßalƒ±≈üma</span>
                                    </div>
                                    <div class="flex items-center justify-between p-2 rounded-lg bg-indigo-50 dark:bg-indigo-900/20">
                                        <span class="font-bold text-indigo-700 dark:text-indigo-400">2B</span>
                                        <span class="text-indigo-600 dark:text-indigo-300">Yarƒ±-deneysel</span>
                                    </div>
                                    <div class="flex items-center justify-between p-2 rounded-lg bg-purple-50 dark:bg-purple-900/20">
                                        <span class="font-bold text-purple-700 dark:text-purple-400">3</span>
                                        <span class="text-purple-600 dark:text-purple-300">Tanƒ±mlayƒ±cƒ± √ßalƒ±≈üma</span>
                                    </div>
                                    <div class="flex items-center justify-between p-2 rounded-lg bg-pink-50 dark:bg-pink-900/20">
                                        <span class="font-bold text-pink-700 dark:text-pink-400">4</span>
                                        <span class="text-pink-600 dark:text-pink-300">Uzman komite</span>
                                    </div>
                                    <div class="flex items-center justify-between p-2 rounded-lg bg-red-50 dark:bg-red-900/20">
                                        <span class="font-bold text-red-700 dark:text-red-400">5</span>
                                        <span class="text-red-600 dark:text-red-300">Uzman g√∂r√º≈ü√º</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ƒ∞≈ülem Butonu -->
                    <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-lg border-2 border-blue-200 dark:border-blue-800 overflow-hidden">
                        <div class="p-6 text-center space-y-4">
                            <button type="submit" 
                                    class="group relative w-full bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 hover:from-blue-700 hover:via-purple-700 hover:to-pink-700 text-white font-bold py-4 px-8 rounded-xl shadow-xl hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 flex items-center justify-center space-x-3" 
                                    id="generateBtn">
                                <svg class="w-6 h-6 group-hover:rotate-12 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"></path>
                                </svg>
                                <span class="text-lg">Vaka Seti Olu≈ütur</span>
                            </button>
                            
                            <div class="bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 border border-indigo-200 dark:border-indigo-800 rounded-xl p-4">
                                <div class="flex items-center justify-center space-x-2">
                                    <svg class="w-5 h-5 text-indigo-600 dark:text-indigo-400 animate-pulse" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M13 7H7v6h6V7z"></path>
                                        <path fill-rule="evenodd" d="M7 2a1 1 0 012 0v1h2V2a1 1 0 112 0v1h2a2 2 0 012 2v2h1a1 1 0 110 2h-1v2h1a1 1 0 110 2h-1v2a2 2 0 01-2 2h-2v1a1 1 0 11-2 0v-1H9v1a1 1 0 11-2 0v-1H5a2 2 0 01-2-2v-2H2a1 1 0 110-2h1V9H2a1 1 0 010-2h1V5a2 2 0 012-2h2V2zM5 5h10v10H5V5z" clip-rule="evenodd"></path>
                                    </svg>
                                    <p class="text-sm font-medium text-indigo-900 dark:text-indigo-200">
                                        <span class="font-bold">Gemini AI</span> ile g√º√ßlendirilmi≈ütir
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const templateType = document.getElementById('templateType');
    const customDirectives = document.getElementById('customDirectives');
    const templateInfo = document.getElementById('templateInfo');
    const templateDescription = document.getElementById('templateDescription');
    const templateDescriptionText = document.getElementById('templateDescriptionText');
    const generateBtn = document.getElementById('generateBtn');
    const form = document.getElementById('caseGeneratorForm');
    const numCases = document.getElementById('numCases');
    const questionsPerCase = document.getElementById('questionsPerCase');
    const caseCountDisplay = document.getElementById('caseCountDisplay');
    const questionCountDisplay = document.getElementById('questionCountDisplay');
    const totalQuestions = document.getElementById('totalQuestions');
    const progressBar = document.getElementById('progressBar');
    const estimatedTime = document.getElementById('estimatedTime');

    // ≈ûablon a√ßƒ±klamalarƒ±
    const templateDescriptions = {
        'antibiotic_stewardship': {
            title: 'üíä Akƒ±lcƒ± Antibiyotik Kullanƒ±mƒ±',
            description: '<strong class="text-blue-600 dark:text-blue-400">Hedef:</strong> Aile Hekimleri<br><strong class="text-blue-600 dark:text-blue-400">Odak:</strong> Gereksiz antibiyotik kullanƒ±mƒ±, doƒüru se√ßim, dozaj ve tedavi s√ºresi. IDSA ve WHO kƒ±lavuzlarƒ± referans alƒ±nƒ±r.'
        },
        'emergency_triage': {
            title: 'üö® Acil Servis Triyajƒ±',
            description: '<strong class="text-blue-600 dark:text-blue-400">Hedef:</strong> Acil Tƒ±p Uzmanlarƒ±<br><strong class="text-blue-600 dark:text-blue-400">Odak:</strong> Triyaj kararlarƒ±, ilk stabilizasyon, kritik hasta y√∂netimi ve kaynak optimizasyonu.'
        },
        'pediatric_diagnosis': {
            title: 'üë∂ Pediatrik Tanƒ±sal Akƒ±l Y√ºr√ºtme',
            description: '<strong class="text-blue-600 dark:text-blue-400">Hedef:</strong> Pediatristler<br><strong class="text-blue-600 dark:text-blue-400">Odak:</strong> Geli≈üimsel deƒüerlendirme, enfeksiyon y√∂netimi, a≈üƒ±lama, beslenme ve b√ºy√ºme izlemi.'
        }
    };

    // Toplam soru hesaplama
    function updateTotals() {
        const cases = parseInt(numCases.value) || 5;
        const questions = parseInt(questionsPerCase.value) || 5;
        const total = cases * questions;
        
        caseCountDisplay.textContent = `${cases} vaka`;
        questionCountDisplay.textContent = `${questions} soru/vaka`;
        totalQuestions.textContent = total;
        
        // Progress bar
        const progressPercent = Math.min((total / 100) * 100, 100);
        progressBar.style.width = progressPercent + '%';
        
        // Tahmini s√ºre
        const estimatedMinutes = Math.ceil(cases * 1.2);
        estimatedTime.textContent = `${estimatedMinutes}-${estimatedMinutes + 5} dakika`;
    }

    // Event listeners
    numCases.addEventListener('input', updateTotals);
    questionsPerCase.addEventListener('input', updateTotals);

    // ≈ûablon deƒüi≈üikliƒüinde
    templateType.addEventListener('change', function() {
        const value = this.value;
        
        if (value === 'custom') {
            customDirectives.classList.remove('hidden');
            templateInfo.classList.add('hidden');
            templateDescription.classList.add('hidden');
            
            // Custom i√ßin required yap
            document.querySelector('[name="research_title"]').required = true;
            document.querySelector('[name="target_group"]').required = true;
            document.querySelector('[name="specialty"]').required = true;
        } else if (value && templateDescriptions[value]) {
            customDirectives.classList.add('hidden');
            templateInfo.classList.remove('hidden');
            templateDescription.classList.remove('hidden');
            
            const desc = templateDescriptions[value];
            templateDescriptionText.innerHTML = `<strong class="text-lg">${desc.title}</strong><br><span class="text-sm mt-2 block">${desc.description}</span>`;
            
            // Template i√ßin required kaldƒ±r
            document.querySelector('[name="research_title"]').required = false;
            document.querySelector('[name="target_group"]').required = false;
            document.querySelector('[name="specialty"]').required = false;
        } else {
            customDirectives.classList.add('hidden');
            templateInfo.classList.add('hidden');
            templateDescription.classList.add('hidden');
        }
    });

    // Form submit animasyonu
    form.addEventListener('submit', function(e) {
        const originalHTML = generateBtn.innerHTML;
        generateBtn.innerHTML = `
            <svg class="animate-spin w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
            </svg>
            <span class="text-lg">Olu≈üturuluyor...</span>
        `;
        generateBtn.disabled = true;
        generateBtn.classList.add('opacity-75', 'cursor-not-allowed');
        
        // Timeout i√ßin yedek
        setTimeout(() => {
            if (generateBtn.disabled) {
                generateBtn.innerHTML = originalHTML;
                generateBtn.disabled = false;
                generateBtn.classList.remove('opacity-75', 'cursor-not-allowed');
            }
        }, 300000); // 5 dakika
    });

    // ƒ∞lk y√ºkleme
    updateTotals();

    // Smooth scroll animasyonu
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Form validasyonu g√∂rsel feedback
    const inputs = form.querySelectorAll('input, select, textarea');
    inputs.forEach(input => {
        input.addEventListener('invalid', function(e) {
            e.preventDefault();
            this.classList.add('border-red-500', 'ring-4', 'ring-red-100');
            
            // Scroll to first invalid input
            this.scrollIntoView({
                behavior: 'smooth',
                block: 'center'
            });
        });
        
        input.addEventListener('input', function() {
            if (this.validity.valid) {
                this.classList.remove('border-red-500', 'ring-4', 'ring-red-100');
            }
        });
    });
});
</script>

<style>
/* Modern Tailwind CSS Custom Styles */
@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

@keyframes pulse-slow {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
}

.animate-float {
    animation: float 3s ease-in-out infinite;
}

.animate-pulse-slow {
    animation: pulse-slow 2s ease-in-out infinite;
}

/* Gradient text */
.gradient-text {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

/* Custom scrollbar */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    @apply bg-slate-100 dark:bg-slate-800;
}

::-webkit-scrollbar-thumb {
    @apply bg-slate-300 dark:bg-slate-600 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
    @apply bg-slate-400 dark:bg-slate-500;
}

/* Focus styles */
input:focus, select:focus, textarea:focus {
    outline: none;
}

/* Smooth transitions */
* {
    transition-property: background-color, border-color, color, fill, stroke, opacity, box-shadow, transform;
    transition-duration: 200ms;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Hover effects */
.hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

/* Loading spinner */
@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.animate-spin {
    animation: spin 1s linear infinite;
}

/* Glass morphism effect */
.glass {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

/* Dark mode improvements */
@media (prefers-color-scheme: dark) {
    .glass {
        background: rgba(0, 0, 0, 0.2);
        border-color: rgba(255, 255, 255, 0.1);
    }
}
</style>
{% endblock %}
