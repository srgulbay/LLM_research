{% extends "admin/admin_layout_new.html" %}

{% block title %}Yeni Araştırma Yükle{% endblock %}

{% block admin_content %}
<div class="mb-8">
    <h2 class="text-3xl font-bold text-slate-900">Toplu Vaka Yükleme (.json)</h2>
    <p class="text-slate-500 mt-1">Bir araştırmayı ve ona ait tüm vakaları tek bir JSON dosyasıyla sisteme yükleyin.</p>
</div>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <div class="bg-white p-8 rounded-xl shadow-lg">
        <form action="{{ url_for('upload_json') }}" method="post">
            <div class="mb-4">
                <label for="json_text" class="block text-sm font-semibold text-slate-700 mb-2">JSON Metnini Buraya Yapıştırın:</label>
                <textarea name="json_text" id="json_text" rows="15" placeholder='{ "research_title": "...", "cases": [ ... ] }' class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 font-mono text-sm"></textarea>
            </div>
            <button type="submit" class="w-full bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:bg-blue-700 transition duration-200">
                JSON ile Yükle ve Oluştur
            </button>
        </form>
    </div>

    <div class="bg-white p-8 rounded-xl shadow-lg">
        <h3 class="font-bold text-slate-900 mb-4">Örnek JSON Formatı</h3>
        <p class="text-sm text-slate-500 mb-4">Aşağıdaki yapıyı referans alarak kendi JSON dosyanızı oluşturabilirsiniz.</p>
        <pre class="bg-slate-100 p-4 rounded-lg text-xs text-slate-700 overflow-x-auto"><code>{
  "research_title": "Araştırmanızın Başlığı",
  "research_description": "Açıklama.",
  "cases": [
    {
      "title": "Vakanın Başlığı",
      "sections": [{"title": "Anamnez", "content": "..."}],
      "questions": [
        {
          "id": "q1_tani",
          "type": "open-ended",
          "label": "1. Tanınız?"
        },
        {
          "id": "q2_yaklasim",
          "type": "multiple-choice",
          "label": "2. Yaklaşımınız?",
          "options": ["Seçenek 1", "Seçenek 2"]
        }
      ],
      "gold_standard": { "q1_tani": "...", "q2_yaklasim": "..." }
    }
  ]
}</code></pre>
    </div>
</div>
{% endblock %}