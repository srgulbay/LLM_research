{% extends "layout.html" %}

{% block title %}Yeni Araştırma Yükle{% endblock %}

{% block content %}
<section class="content-card">
    <h2>Toplu Vaka Yükleme (.json)</h2>
    <p class="subtitle">Bir araştırmayı ve ona ait tüm vakaları tek bir JSON dosyasıyla sisteme yükleyin.</p>
    
    <form action="{{ url_for('upload_json') }}" method="post" enctype="multipart/form-data">
        <div class="form-grup">
            <label for="json_text">JSON Metnini Buraya Yapıştırın:</label>
            <textarea name="json_text" id="json_text" rows="15" placeholder='{ "research_title": "...", "cases": [ ... ] }'></textarea>
        </div>
        <button type="submit">JSON ile Yükle ve Oluştur</button>
    </form>
</section>

<section class="content-card" style="margin-top: 2rem;">
    <h3>Örnek JSON Formatı</h3>
    <p class="subtitle">Aşağıdaki yapıyı referans alarak kendi JSON dosyanızı oluşturabilirsiniz.</p>
    <div class="csv-format">
        <pre><code>{
  "research_title": "Araştırmanızın Başlığı",
  "research_description": "Kullanıcılara gösterilecek açıklama.",
  "cases": [
    {
      "case_id_internal": "VAKA_01",
      "title": "İlk Vakanın Başlığı",
      "sections": [
        { "title": "Anamnez", "content": "..." }
      ],
      "questions": [
        {
          "id": "q1_tani",
          "type": "open-ended",
          "label": "1. En olası tanınız nedir?"
        },
        {
          "id": "q2_yaklasim",
          "type": "multiple-choice",
          "label": "2. En uygun yaklaşımınız?",
          "options": ["Seçenek 1", "Seçenek 2"]
        }
      ],
      "gold_standard": { "q1_tani": "...", "q2_yaklasim": "..." }
    }
  ]
}</code></pre>
    </div>
</section>
{% endblock %}